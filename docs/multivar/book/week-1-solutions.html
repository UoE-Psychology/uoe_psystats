<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Week 1 Solutions | Multivariate Statistics and Methodology using R</title>
  <meta name="description" content="This is the page that contains the course labs materials" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Week 1 Solutions | Multivariate Statistics and Methodology using R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the page that contains the course labs materials" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Week 1 Solutions | Multivariate Statistics and Methodology using R" />
  
  <meta name="twitter:description" content="This is the page that contains the course labs materials" />
  

<meta name="author" content="Department of Psychology, University of Edinburgh" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="week-1-tidyverse-markdown.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script>
  $(document).ready(function() {
    $head = $('#header');
    $head.prepend('<img style="padding-right:25%; margin-bottom:10px;" src="https://www.ed.ac.uk/sites/all/themes/uoe/assets/logo.png" width="770px" align="left">')
  });
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MSMR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview of the Course</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-team"><i class="fa fa-check"></i>The team</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-stuff"><i class="fa fa-check"></i>R stuff</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-cheatsheets"><i class="fa fa-check"></i>R Cheatsheets</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-community"><i class="fa fa-check"></i>R Community</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html"><i class="fa fa-check"></i><b>1</b> Week 1: Tidyverse &amp; Markdown</a><ul>
<li class="chapter" data-level="" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#background-reading"><i class="fa fa-check"></i>Background &amp; Reading</a></li>
<li class="chapter" data-level="1.1" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#data-visualization-with-ggplot"><i class="fa fa-check"></i><b>1.1</b> Data Visualization with <code>ggplot</code></a><ul>
<li class="chapter" data-level="1.1.1" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#geoms"><i class="fa fa-check"></i><b>1.1.1</b> Geoms</a></li>
<li class="chapter" data-level="1.1.2" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#recreating-a-plot"><i class="fa fa-check"></i><b>1.1.2</b> Recreating a plot</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#data-management-with-the-tidyverse"><i class="fa fa-check"></i><b>1.2</b> Data management with the Tidyverse</a><ul>
<li class="chapter" data-level="1.2.1" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#piping"><i class="fa fa-check"></i><b>1.2.1</b> Piping!</a></li>
<li class="chapter" data-level="1.2.2" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#grouping-summarising-filtering-mutating-and-selecting"><i class="fa fa-check"></i><b>1.2.2</b> Grouping, summarising, filtering, mutating and selecting</a></li>
<li class="chapter" data-level="1.2.3" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#reshaping"><i class="fa fa-check"></i><b>1.2.3</b> Reshaping</a></li>
<li class="chapter" data-level="" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#less-guidance"><i class="fa fa-check"></i>Less guidance</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#reproducible-research-with-rmarkdown"><i class="fa fa-check"></i><b>1.3</b> Reproducible research with RMarkdown</a><ul>
<li class="chapter" data-level="1.3.1" data-path="week-1-tidyverse-markdown.html"><a href="week-1-tidyverse-markdown.html#convert-a-script-into-a-r-notebook"><i class="fa fa-check"></i><b>1.3.1</b> Convert a script into a R Notebook</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="week-1-solutions.html"><a href="week-1-solutions.html"><i class="fa fa-check"></i>Week 1 Solutions</a><ul>
<li class="chapter" data-level="1.4" data-path="week-1-solutions.html"><a href="week-1-solutions.html#data-visualization-with-ggplot-1"><i class="fa fa-check"></i><b>1.4</b> Data Visualization with <code>ggplot</code></a><ul>
<li class="chapter" data-level="1.4.1" data-path="week-1-solutions.html"><a href="week-1-solutions.html#geoms-1"><i class="fa fa-check"></i><b>1.4.1</b> Geoms</a></li>
<li class="chapter" data-level="1.4.2" data-path="week-1-solutions.html"><a href="week-1-solutions.html#recreating-a-plot-1"><i class="fa fa-check"></i><b>1.4.2</b> Recreating a plot</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="week-1-solutions.html"><a href="week-1-solutions.html#data-management-with-the-tidyverse-1"><i class="fa fa-check"></i><b>1.5</b> Data management with the Tidyverse</a><ul>
<li class="chapter" data-level="1.5.1" data-path="week-1-solutions.html"><a href="week-1-solutions.html#piping-1"><i class="fa fa-check"></i><b>1.5.1</b> Piping!</a></li>
<li class="chapter" data-level="1.5.2" data-path="week-1-solutions.html"><a href="week-1-solutions.html#grouping-summarising-filtering-mutating-and-selecting-1"><i class="fa fa-check"></i><b>1.5.2</b> Grouping, summarising, filtering, mutating and selecting</a></li>
<li class="chapter" data-level="1.5.3" data-path="week-1-solutions.html"><a href="week-1-solutions.html#reshaping-1"><i class="fa fa-check"></i><b>1.5.3</b> Reshaping</a></li>
<li class="chapter" data-level="" data-path="week-1-solutions.html"><a href="week-1-solutions.html#less-guidance-1"><i class="fa fa-check"></i>Less guidance</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Multivariate Statistics and Methodology using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="week-1-solutions" class="section level1 unnumbered">
<h1>Week 1 Solutions</h1>
<div id="data-visualization-with-ggplot-1" class="section level2">
<h2><span class="header-section-number">1.4</span> Data Visualization with <code>ggplot</code></h2>
<div id="geoms-1" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Geoms</h3>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Load the <code>ggplot2</code> package, read in the data using <code>load()</code> and <code>url()</code> from <a href="https://edin.ac/2Erg9ZW">https://edin.ac/2Erg9ZW</a> and extract some summary statistics.</p>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Make a summary plot showing mean accuracy for each category of judgment<br />
<strong>hint:</strong> try <code>?stat_summary</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">#one way of doing this:</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">fill =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun=</span>mean, <span class="dt">geom=</span><span class="st">&quot;bar&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Explore the different ways of showing variability. Construct a plot using each of the following geoms:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># * Boxplot</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">fill =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co"># * Jitter</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">colour =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width=</span><span class="fl">0.2</span>, <span class="dt">alpha=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co"># * Violin plot</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">fill =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_violin</span>()</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co"># * Errorbar</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">colour =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.data=</span>mean_se, <span class="dt">geom=</span><span class="st">&quot;errorbar&quot;</span>)</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co"># * Pointrange</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">colour =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.data=</span>mean_se, <span class="dt">geom=</span><span class="st">&quot;pointrange&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Combine two of the geoms used above to create a visualization of the mean accuracy, a measure of variability, and all of the data points.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">colour =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width=</span><span class="fl">0.2</span>, <span class="dt">alpha=</span><span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.data=</span>mean_se, <span class="dt">geom=</span><span class="st">&quot;errorbar&quot;</span>, </a>
<a class="sourceLine" id="cb11-4" data-line-number="4">               <span class="dt">colour=</span><span class="st">&quot;black&quot;</span>, <span class="dt">width=</span><span class="fl">0.4</span>, <span class="dt">size=</span><span class="fl">1.5</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Refine the plot by, for example, removing unnecessary elements, adding useful annotations (e.g., chance performance = 50%), selecting a good color scheme, etc.<br />
<strong>tip:</strong> This is where google becomes really helpful, <a href="https://lmgtfy.com/?q=remove+a+legend+in+ggplot2" target="_blank">for example</a></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">ggplot</span>(speech_ses, <span class="kw">aes</span>(<span class="dt">x =</span> Category, <span class="dt">y =</span> Accuracy, <span class="dt">colour =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width=</span><span class="fl">0.2</span>, <span class="dt">alpha=</span><span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.data=</span>mean_se, <span class="dt">geom=</span><span class="st">&quot;errorbar&quot;</span>, </a>
<a class="sourceLine" id="cb12-4" data-line-number="4">               <span class="dt">colour=</span><span class="st">&quot;black&quot;</span>, <span class="dt">width=</span><span class="fl">0.4</span>, <span class="dt">size=</span><span class="fl">1.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">  </span><span class="kw">guides</span>(<span class="dt">colour =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Set1&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept=</span><span class="dv">50</span>, <span class="dt">linetype=</span><span class="st">&quot;dashed&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
</div>
<div id="recreating-a-plot-1" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Recreating a plot</h3>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong> Pick one of the graphs below, and recreate it using <code>ggplot</code> (if you like, try to make it better!).</p>
<div id="option-a-1" class="section level4 unnumbered">
<h4>Option A</h4>
<div class="figure">
<img src="images/plot1_npr.png" alt="Women in computer science" />
<p class="caption">Women in computer science</p>
</div>
<p>The data (in .csv format) can be downloaded from <a href="https://edin.ac/2qYA0wr">https://edin.ac/2qYA0wr</a>. You can use <code>read.csv(url(&quot;https://edin.ac/2qYA0wr&quot;))</code> to read it directly into R.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">women_cs&lt;-<span class="kw">read.csv</span>(<span class="kw">url</span>(<span class="st">&quot;https://edin.ac/2qYA0wr&quot;</span>))</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">ggplot</span>(women_cs, <span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>pct_women_majors, <span class="dt">color=</span>field))<span class="op">+</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="ot">NULL</span>,<span class="dt">y=</span><span class="ot">NULL</span>, <span class="dt">title=</span><span class="st">&quot;What happened to women in computer science?&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&#39;#11605E&#39;</span>, <span class="st">&#39;#17807E&#39;</span>, <span class="st">&#39;#8BC0BF&#39;</span>,<span class="st">&#39;#D8472B&#39;</span>))<span class="op">+</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">label=</span>scales<span class="op">::</span>percent)<span class="op">+</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="st">  </span><span class="kw">theme_minimal</span>(<span class="dt">base_family=</span><span class="st">&quot;Helvetica&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.title=</span><span class="kw">element_blank</span>())</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co"># If you want to get fancier, and add the labels at the end of the lines, check out the gghighlight package!</span></a></code></pre></div>
</div>
<div id="option-b-1" class="section level4 unnumbered">
<h4>Option B</h4>
<p>image</p>
<p>The .csv can be downloaded from <a href="LINK">LINK</a>.</p>
</div>
</div>
</div>
<div id="data-management-with-the-tidyverse-1" class="section level2">
<h2><span class="header-section-number">1.5</span> Data management with the Tidyverse</h2>
<div id="piping-1" class="section level3">
<h3><span class="header-section-number">1.5.1</span> Piping!</h3>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Translate the following statements between Base R and sequences of pipes. The first is shown for you.</p>
<div id="section-3" class="section level5 unnumbered">
<h5>1</h5>
<p>Base R:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">round</span>(<span class="kw">mean</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>,<span class="dv">0</span>,<span class="dv">1</span>)))</a></code></pre></div>
<p>Pipes :</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">rnorm</span>(<span class="dv">100</span>,<span class="dv">0</span>,<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw">mean</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw">round</span>()</a></code></pre></div>
</div>
<div id="section-4" class="section level5 unnumbered">
<h5>2</h5>
<p>Base R:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">x&lt;-<span class="dv">10</span><span class="op">:</span><span class="dv">100</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">round</span>(<span class="kw">exp</span>(<span class="kw">diff</span>(<span class="kw">log</span>(x))), <span class="dv">2</span>)</a></code></pre></div>
<p>Pipes:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="dv">10</span><span class="op">:</span><span class="dv">100</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">log</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">    </span><span class="kw">diff</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">    </span><span class="kw">exp</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="st">    </span><span class="kw">round</span>(<span class="dv">2</span>)</a></code></pre></div>
</div>
<div id="section-5" class="section level5 unnumbered">
<h5>3</h5>
<p>Pipes:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="dv">6</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(pi, <span class="dt">digits=</span>.)</a></code></pre></div>
<p>Base R:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">round</span>(pi, <span class="dt">digits=</span><span class="dv">6</span>)</a></code></pre></div>
</div>
</div>
<div id="grouping-summarising-filtering-mutating-and-selecting-1" class="section level3">
<h3><span class="header-section-number">1.5.2</span> Grouping, summarising, filtering, mutating and selecting</h3>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Load the tidyverse, and haven package, and read in the data using <code>read_sav()</code> (.sav is the type of file which comes out of another stats software, SPSS). You can download the data from <a href="https://edin.ac/34n6AWA">https://edin.ac/34n6AWA</a> to your computer, and then read it in.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">exam &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">read_sav</span>(<span class="st">&quot;data/exam.sav&quot;</span>) </a></code></pre></div>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Calculate the mean score for each exam</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">exam <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(exam) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">M =</span> <span class="kw">mean</span>(scores))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##    exam     M
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1  42.9
## 2     2  37.9
## 3     3  38.9</code></pre>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Calculate the mean score for each exam for female students only</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">exam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(gender<span class="op">==</span><span class="st">&quot;f&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(exam) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">M =</span> <span class="kw">mean</span>(scores))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##    exam     M
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1  43.1
## 2     2  36.6
## 3     3  38.1</code></pre>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Make a new dataframe containing only the exam scores for males for exam number 1, with a new variable indicating whether they passed or not (pass = a score of 40)</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">exam_m1 &lt;-<span class="st"> </span>exam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(exam <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, gender <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pass =</span> <span class="kw">ifelse</span>(scores<span class="op">&gt;</span><span class="dv">40</span>,<span class="st">&quot;pass&quot;</span>,<span class="st">&quot;fail&quot;</span>))</a></code></pre></div>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Calculate the average score for each exam for male and female students</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">exam <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(exam, gender) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">M =</span> <span class="kw">mean</span>(scores))</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
## # Groups:   exam [3]
##    exam gender     M
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1     1 f       43.1
## 2     1 m       42.7
## 3     2 f       36.6
## 4     2 m       39.1
## 5     3 f       38.1
## 6     3 m       39.7</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="co">#    use spread() to make it easier to compare</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2">exam <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(exam, gender) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">M =</span> <span class="kw">mean</span>(scores)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="st">  </span><span class="kw">spread</span>(gender, M)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 3
## # Groups:   exam [3]
##    exam     f     m
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1  43.1  42.7
## 2     2  36.6  39.1
## 3     3  38.1  39.7</code></pre>
</div>
<div id="reshaping-1" class="section level3">
<h3><span class="header-section-number">1.5.3</span> Reshaping</h3>
<p>wide, long, “tidy” data..</p>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Convert the USArrests data set from a wide to a long format so that instead of separate variables for each crime type (Murder, Assault, Rape), there is one variable that identifies the crime type and one variable that contains the rates for each crime type for each state.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">gather</span>(USArrests, <span class="dt">key=</span><span class="st">&quot;CrimeType&quot;</span>, <span class="dt">value=</span><span class="st">&quot;Rate&quot;</span>, </a>
<a class="sourceLine" id="cb30-2" data-line-number="2">            Murder, Assault, Rape)</a></code></pre></div>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Make a scatterplot showing the relationship between each type of violent crime rate and percent of population living in urban areas.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">ggplot</span>(x, <span class="kw">aes</span>(UrbanPop, Rate)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>CrimeType, <span class="dt">scales=</span><span class="st">&quot;free&quot;</span>, <span class="dt">nrow=</span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">stat_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>)</a></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
</div>
<div id="less-guidance-1" class="section level3 unnumbered">
<h3>Less guidance</h3>
<div style="position: absolute;">
<img style="position:relative;left:-20px;width:15px" src="images/task.png"/>
</div>
<p><strong>Task: </strong>Tidy the data and make a graph of average accuracy for each question type.<br />
<strong>Hint:</strong> the <code>separate()</code> function may come in handy at some point.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">iq &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(psych<span class="op">::</span>ability) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span><span class="st">&quot;Item&quot;</span>, <span class="dt">value=</span><span class="st">&quot;Correct&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">16</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="st">  </span><span class="kw">separate</span>(Item, <span class="kw">c</span>(<span class="st">&quot;Domain&quot;</span>, <span class="st">&quot;Number&quot;</span>))</a>
<a class="sourceLine" id="cb33-4" data-line-number="4"></a>
<a class="sourceLine" id="cb33-5" data-line-number="5"><span class="kw">ggplot</span>(iq, <span class="kw">aes</span>(Domain, Correct)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-6" data-line-number="6"><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun =</span> mean, <span class="dt">geom=</span><span class="st">&quot;bar&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>

</div>
</div>
</div>






            </section>

          </div>
        </div>
      </div>
<a href="week-1-tidyverse-markdown.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
